import{b as v,d as x,be as u,bv as r,cU as $,dz as C,B as _,A as R,x as n,dA as A,V as L,bw as c,n as p,av as N,Q as m,ai as T}from"./index-83beb5cc.js";import{b as B}from"./useTitle-61b32228.js";import{I as M}from"./SettingItem-7b2bf308.js";import{R as V}from"./ResponsiveGrid-ccd7a76a.js";import"./index-65587416.js";import"./index-69e5e5d5.js";import"./index-ef8e2a8a.js";import"./item_type-32dc6fdf.js";const j=f=>{const o=v(),{pathname:h}=x();B(`manage.sidemenu.${h().split("/").pop()}`);const[w,y]=u(()=>r.get(`/admin/setting/list?group=${f.group}`)),[l,g]=$([]),i=async()=>{const e=await y();c(e,g)};i();const[I,k]=u(()=>r.post("/admin/setting/save",C(l))),[S,d]=_(!1),b=R(()=>{const e=[...l],a=e.findIndex(t=>t.key==="allow_indexed"),s=e.findIndex(t=>t.key==="use_newui");if(a!==-1&&s!==-1){if(s<a){const t=e.splice(s,1)[0];e.splice(a,0,t)}else if(s>a+1){const t=e.splice(s,1)[0];e.splice(a+1,0,t)}}return e});return n(T,{w:"$full",alignItems:"start",spacing:"$2",get children(){return[n(V,{get children(){return n(A,{get each(){return b()},children:(e,a)=>n(M,L(e,{onChange:s=>{g(t=>e().key===t.key,"value",s)},onDelete:async()=>{d(!0);const s=await r.post(`/admin/setting/delete?key=${e().key}`);d(!1),c(s,()=>{p.success(o("global.delete_success")),i()})}}))})}}),n(N,{spacing:"$2",get children(){return[n(m,{colorScheme:"accent",onClick:i,get loading(){return w()||S()},get children(){return o("global.refresh")}}),n(m,{get loading(){return I()},onClick:async()=>{const e=await k();c(e,()=>p.success(o("global.save_success")))},get children(){return o("global.save")}})]}})]}})};export{j as default};
