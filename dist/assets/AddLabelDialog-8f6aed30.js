import{b as O,B as l,H as F,dI as M,bw as B,x as e,M as I,I as T,bz as k,J as H,am as L,K as D,ai as C,bW as c,bJ as u,L as $,N as R,av as p,ao as z,cD as A,b_ as J,W as q,ah as w,aZ as E,O as K,Q as v,R as N,dJ as h,dK as W,dL as j,aO as Q}from"./index-83beb5cc.js";const m=["#ff776e","#feb34a","#62e56f","#4e9cff","#d17bff"],Z=n=>{const t=O(),[r,i]=l(""),[o,s]=l(""),[S,b]=l(!1),[d,g]=l(m[0]),[x,f]=l([]);F(()=>{n.editingLabel?(i(n.editingLabel.name),s(n.editingLabel.description||""),g(n.editingLabel.bg_color),M(n.editingLabel.id).then(a=>{B(a,y=>{f(y||[])})})):(i(""),s(""),g(m[0]),f([]))});const _=async()=>{if(!r()){h.show({title:t("home.tag.name"),description:t("home.tag.name_required"),status:"warning"});return}try{b(!0),n.editingLabel?await W(n.editingLabel.id,r(),o(),d()):await j(r(),o(),d()),n.onSubmit(r(),o(),d()),i(""),s(""),n.onClose(),Q.emit("refresh_labels"),h.show({title:t("home.tag.name"),description:n.editingLabel?t("home.tag.update_success"):t("home.tag.create_success"),status:"success"})}catch(a){h.show({title:t("home.tag.name"),description:a.message||(n.editingLabel?t("home.tag.update_failed"):t("home.tag.create_failed")),status:"danger"})}finally{b(!1)}};return e(N,{get opened(){return n.isOpen},get onClose(){return n.onClose},get children(){return[e(I,{}),e(T,{get children(){return[e(k,{}),e(H,{get children(){return L(()=>!!n.editingLabel,!0)()?t("home.tag.edit"):t("home.tag.add")}}),e(D,{get children(){return e(C,{spacing:"$3",get children(){return[e(c,{required:!0,get children(){return[e(u,{get children(){return t("home.tag.name")}}),e($,{get placeholder(){return t("home.tag.name")},get value(){return r()},maxLength:10,onInput:a=>i(a.currentTarget.value)}),e(R,{pl:"$1",get children(){return[L(()=>r().length),"/10"]}})]}}),e(c,{get children(){return[e(u,{get children(){return t("home.tag.description")}}),e($,{get placeholder(){return t("home.tag.description")},get value(){return o()},onChange:a=>s(a.currentTarget.value)})]}}),e(c,{get children(){return[e(u,{get children(){return t("home.tag.color")}}),e(p,{spacing:"$4",justifyContent:"start",get children(){return m.map(a=>e(z,{as:"button",type:"button",w:"$7",h:"$7",rounded:"$full",bgColor:a,cursor:"pointer",get border(){return d()===a?"3px solid $neutral8":"none"},_hover:{transform:"scale(1.1)"},transition:"all 0.2s",onClick:()=>g(a)}))}})]}}),e(A,{}),e(c,{get children(){return[e(J,{mb:"$4",get children(){return t("home.tag.related_files")}}),e(C,{spacing:"$2",alignItems:"stretch",get children(){return e(q,{get each(){return x()},children:a=>e(p,{p:"$4",bg:"$neutral3",rounded:"$md",spacing:"$2",overflow:"hidden",alignItems:"center",get children(){return[e(w,{flex:"2",fontSize:"$md",noOfLines:1,get children(){return a.name}}),e(E,{get label(){return a.path},placement:"top",get children(){return e(w,{flex:"3",fontSize:"$sm",color:"$neutral11",noOfLines:1,css:{direction:"rtl",textAlign:"left",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},get children(){return a.path}})}})]}})})}})]}})]}})}}),e(K,{get children(){return[e(v,{colorScheme:"primary",get onClick(){return n.onClose},mr:"$2",get children(){return t("global.cancel")}}),e(v,{onClick:_,get loading(){return S()},get children(){return t("global.confirm")}})]}})]}})]}})};export{Z as default};
